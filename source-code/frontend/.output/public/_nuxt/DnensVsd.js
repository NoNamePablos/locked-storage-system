import{_ as xe}from"./B4yZoH7T.js";import{E as Ce,G as ze,_ as w,H as $e,aR as Le,aS as Pe,q as re,ap as T,O as me,M as X,h as ie,P as K,A as fe,S as ge,b as a,Q as j,U as Ae,f as we,aT as ke,aC as oe,u as Me,s as Re,bk as ce,r as U,C as A,bl as Ee,o as u,x,w as i,a as g,B as $,ag as V,c as M,t as D,D as ee,aj as te,F,X as je,am as Ne,ao as Be}from"./BJuUlySd.js";import{L as He}from"./BhNIWa2l.js";import{R,U as W}from"./CthdvjZ6.js";import{R as Te,L as De}from"./CimRBjKu.js";import{M as Fe}from"./B-Oe7ZGK.js";import{F as Ge,c as Ie,_ as Ue,B as Ve}from"./BZsC2ctA.js";import{_ as We,d as Xe,M as Ye}from"./DSKOKChf.js";import{_ as qe,a as Qe,L as Je}from"./vXXLiWwG.js";import{u as Ze}from"./BzDSlWI0.js";import{R as Ke}from"./0ilB-tuh.js";import{e as et}from"./BNZDlUDy.js";import{_ as ve}from"./BbNsEJ2y.js";import{U as tt}from"./CvfJGVh9.js";import"./DlAUqK2U.js";import"./CRyH2PlJ.js";import"./CIBDcU51.js";import"./DGYNie3Z.js";const nt=e=>{const{antCls:n,componentCls:t,iconCls:r,avatarBg:o,avatarColor:S,containerSize:d,containerSizeLG:h,containerSizeSM:C,textFontSize:y,textFontSizeLG:b,textFontSizeSM:k,borderRadius:P,borderRadiusLG:c,borderRadiusSM:m,lineWidth:O,lineType:v}=e,_=(p,s,f)=>({width:p,height:p,lineHeight:`${p-O*2}px`,borderRadius:"50%",[`&${t}-square`]:{borderRadius:f},[`${t}-string`]:{position:"absolute",left:{_skip_check_:!0,value:"50%"},transformOrigin:"0 center"},[`&${t}-icon`]:{fontSize:s,[`> ${r}`]:{margin:0}}});return{[t]:w(w(w(w({},$e(e)),{position:"relative",display:"inline-block",overflow:"hidden",color:S,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:o,border:`${O}px ${v} transparent`,"&-image":{background:"transparent"},[`${n}-image-img`]:{display:"block"}}),_(d,y,P)),{"&-lg":w({},_(h,b,c)),"&-sm":w({},_(C,k,m)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},rt=e=>{const{componentCls:n,groupBorderColor:t,groupOverlapping:r,groupSpace:o}=e;return{[`${n}-group`]:{display:"inline-flex",[`${n}`]:{borderColor:t},"> *:not(:first-child)":{marginInlineStart:r}},[`${n}-group-popover`]:{[`${n} + ${n}`]:{marginInlineStart:o}}}},_e=Ce("Avatar",e=>{const{colorTextLightSolid:n,colorTextPlaceholder:t}=e,r=ze(e,{avatarBg:t,avatarColor:n});return[nt(r),rt(r)]},e=>{const{controlHeight:n,controlHeightLG:t,controlHeightSM:r,fontSize:o,fontSizeLG:S,fontSizeXL:d,fontSizeHeading3:h,marginXS:C,marginXXS:y,colorBorderBg:b}=e;return{containerSize:n,containerSizeLG:t,containerSizeSM:r,textFontSize:Math.round((S+d)/2),textFontSizeLG:h,textFontSizeSM:o,groupSpace:y,groupOverlapping:-C,groupBorderColor:b}}),he=Symbol("AvatarContextKey"),ot=()=>Le(he,{}),at=e=>Pe(he,e),lt=()=>({prefixCls:String,shape:{type:String,default:"circle"},size:{type:[Number,String,Object],default:()=>"default"},src:String,srcset:String,icon:Ae.any,alt:String,gap:Number,draggable:{type:Boolean,default:void 0},crossOrigin:String,loadError:{type:Function}}),N=re({compatConfig:{MODE:3},name:"AAvatar",inheritAttrs:!1,props:lt(),slots:Object,setup(e,n){let{slots:t,attrs:r}=n;const o=T(!0),S=T(!1),d=T(1),h=T(null),C=T(null),{prefixCls:y}=me("avatar",e),[b,k]=_e(y),P=ot(),c=X(()=>e.size==="default"?P.size:e.size),m=Ze(),O=et(()=>{if(typeof e.size!="object")return;const s=Ge.find(L=>m.value[L]);return e.size[s]}),v=s=>O.value?{width:`${O.value}px`,height:`${O.value}px`,lineHeight:`${O.value}px`,fontSize:`${s?O.value/2:18}px`}:{},_=()=>{if(!h.value||!C.value)return;const s=h.value.offsetWidth,f=C.value.offsetWidth;if(s!==0&&f!==0){const{gap:L=4}=e;L*2<f&&(d.value=f-L*2<s?(f-L*2)/s:1)}},p=()=>{const{loadError:s}=e;(s==null?void 0:s())!==!1&&(o.value=!1)};return ie(()=>e.src,()=>{K(()=>{o.value=!0,d.value=1})}),ie(()=>e.gap,()=>{K(()=>{_()})}),fe(()=>{K(()=>{_(),S.value=!0})}),()=>{var s,f;const{shape:L,src:B,alt:G,srcset:q,draggable:Q,crossOrigin:J}=e,I=(s=P.shape)!==null&&s!==void 0?s:L,l=ge(t,e,"icon"),z=y.value,be={[`${r.class}`]:!!r.class,[z]:!0,[`${z}-lg`]:c.value==="large",[`${z}-sm`]:c.value==="small",[`${z}-${I}`]:!0,[`${z}-image`]:B&&o.value,[`${z}-icon`]:l,[k.value]:!0},Se=typeof c.value=="number"?{width:`${c.value}px`,height:`${c.value}px`,lineHeight:`${c.value}px`,fontSize:l?`${c.value/2}px`:"18px"}:{},se=(f=t.default)===null||f===void 0?void 0:f.call(t);let H;if(B&&o.value)H=a("img",{draggable:Q,src:B,srcset:q,onError:p,alt:G,crossorigin:J},null);else if(l)H=l;else if(S.value||d.value!==1){const Z=`scale(${d.value}) translateX(-50%)`,ye={msTransform:Z,WebkitTransform:Z,transform:Z},Oe=typeof c.value=="number"?{lineHeight:`${c.value}px`}:{};H=a(Ke,{onResize:_},{default:()=>[a("span",{class:`${z}-string`,ref:h,style:w(w({},Oe),ye)},[se])]})}else H=a("span",{class:`${z}-string`,ref:h,style:{opacity:0}},[se]);return b(a("span",j(j({},r),{},{ref:C,class:be,style:[Se,v(!!l),r.style]}),[H]))}}}),st=()=>({prefixCls:String,maxCount:Number,maxStyle:{type:Object,default:void 0},maxPopoverPlacement:{type:String,default:"top"},maxPopoverTrigger:String,size:{type:[Number,String,Object],default:"default"},shape:{type:String,default:"circle"}}),ne=re({compatConfig:{MODE:3},name:"AAvatarGroup",inheritAttrs:!1,props:st(),setup(e,n){let{slots:t,attrs:r}=n;const{prefixCls:o,direction:S}=me("avatar",e),d=X(()=>`${o.value}-group`),[h,C]=_e(o);return we(()=>{const y={size:e.size,shape:e.shape};at(y)}),()=>{const{maxPopoverPlacement:y="top",maxCount:b,maxStyle:k,maxPopoverTrigger:P="hover",shape:c}=e,m={[d.value]:!0,[`${d.value}-rtl`]:S.value==="rtl",[`${r.class}`]:!!r.class,[C.value]:!0},O=ge(t,e),v=ke(O).map((p,s)=>Ie(p,{key:`avatar-key-${s}`})),_=v.length;if(b&&b<_){const p=v.slice(0,b),s=v.slice(b,_);return p.push(a(ve,{key:"avatar-popover-key",content:s,trigger:P,placement:y,overlayClassName:`${d.value}-popover`},{default:()=>[a(N,{style:k,shape:c},{default:()=>[`+${_-b}`]})]})),h(a("div",j(j({},r),{},{class:m,style:r.style}),[p]))}return h(a("div",j(j({},r),{},{class:m,style:r.style}),[v]))}}});N.Group=ne;N.install=function(e){return e.component(N.name,N),e.component(ne.name,ne),e};var it={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-600 72h560v208H232V136zm560 480H232V408h560v208zm0 272H232V680h560v208zM304 240a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"database",theme:"outlined"};function ue(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?Object(arguments[n]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable}))),r.forEach(function(o){ct(e,o,t[o])})}return e}function ct(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var Y=function(n,t){var r=ue({},n,t.attrs);return a(oe,ue({},r,{icon:it}),null)};Y.displayName="DatabaseOutlined";Y.inheritAttrs=!1;var ut={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 472a40 40 0 1080 0 40 40 0 10-80 0zm367 352.9L696.3 352V178H768v-68H256v68h71.7v174L145 824.9c-2.8 7.4-4.3 15.2-4.3 23.1 0 35.3 28.7 64 64 64h614.6c7.9 0 15.7-1.5 23.1-4.3 33-12.7 49.4-49.8 36.6-82.8zM395.7 364.7V180h232.6v184.7L719.2 600c-20.7-5.3-42.1-8-63.9-8-61.2 0-119.2 21.5-165.3 60a188.78 188.78 0 01-121.3 43.9c-32.7 0-64.1-8.3-91.8-23.7l118.8-307.5zM210.5 844l41.7-107.8c35.7 18.1 75.4 27.8 116.6 27.8 61.2 0 119.2-21.5 165.3-60 33.9-28.2 76.3-43.9 121.3-43.9 35 0 68.4 9.5 97.6 27.1L813.5 844h-603z"}}]},name:"experiment",theme:"outlined"};function de(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?Object(arguments[n]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable}))),r.forEach(function(o){dt(e,o,t[o])})}return e}function dt(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var ae=function(n,t){var r=de({},n,t.attrs);return a(oe,de({},r,{icon:ut}),null)};ae.displayName="ExperimentOutlined";ae.inheritAttrs=!1;var pt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M521.7 82c-152.5-.4-286.7 78.5-363.4 197.7-3.4 5.3.4 12.3 6.7 12.3h70.3c4.8 0 9.3-2.1 12.3-5.8 7-8.5 14.5-16.7 22.4-24.5 32.6-32.5 70.5-58.1 112.7-75.9 43.6-18.4 90-27.8 137.9-27.8 47.9 0 94.3 9.3 137.9 27.8 42.2 17.8 80.1 43.4 112.7 75.9 32.6 32.5 58.1 70.4 76 112.5C865.7 417.8 875 464.1 875 512c0 47.9-9.4 94.2-27.8 137.8-17.8 42.1-43.4 80-76 112.5s-70.5 58.1-112.7 75.9A352.8 352.8 0 01520.6 866c-47.9 0-94.3-9.4-137.9-27.8A353.84 353.84 0 01270 762.3c-7.9-7.9-15.3-16.1-22.4-24.5-3-3.7-7.6-5.8-12.3-5.8H165c-6.3 0-10.2 7-6.7 12.3C234.9 863.2 368.5 942 520.6 942c236.2 0 428-190.1 430.4-425.6C953.4 277.1 761.3 82.6 521.7 82zM395.02 624v-76h-314c-4.4 0-8-3.6-8-8v-56c0-4.4 3.6-8 8-8h314v-76c0-6.7 7.8-10.5 13-6.3l141.9 112a8 8 0 010 12.6l-141.9 112c-5.2 4.1-13 .4-13-6.3z"}}]},name:"login",theme:"outlined"};function pe(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?Object(arguments[n]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable}))),r.forEach(function(o){mt(e,o,t[o])})}return e}function mt(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var le=function(n,t){var r=pe({},n,t.attrs);return a(oe,pe({},r,{icon:pt}),null)};le.displayName="LoginOutlined";le.inheritAttrs=!1;var E=(e=>(e.ALL="all",e.COMPANY="company",e.USER="user",e))(E||{});const ft={class:"h-[48px] p-2 flex justify-between"},gt={class:"pt-4 border-solid border-transparent border-t-gray-200 border-0 border-t-[1px] h-full border-r-[1px] border-r-gray-200"},vt={key:0},_t={class:"h-[48px] flex bg-white px-8"},ht={class:"flex gap-8 items-center ml-auto"},bt=g("span",null,"Настройки",-1),St=g("span",null,"Выход",-1),yt={class:"flex items-center gap-2 hover:bg-gray-200 px-2 py-1 rounded-lg"},Ot={class:"transition-all"},xt={class:"bg-white h-full border-solid border-transparent border-t-gray-200 border-0 border-t-[1px]"},Gt=re({__name:"PlatformLayout",setup(e){const n=Me(),t=Re(),{user:r}=ce(t),o=U(!1),S=U(!1),d=U({to:R.WORKSPACE_COMPANY,title:"Компания",permission:E.ALL,icon:A(Y),subMenu:[{id:1,to:R.COMPANY_CLUSTER,title:"Пространство компании",permission:E.ALL,icon:A(W)},{id:2,to:R.COMPANY_ROLES,title:"Роли",permission:E.ALL,icon:A(W),isOwner:!0},{id:3,to:R.WORKSPACE_COMPANY,title:"Пользователи",permission:E.ALL,icon:A(Y),isOwner:!0}]}),h=X(()=>d.value.subMenu.filter(c=>c.isOwner)),C=U([{id:12,to:R.RECORDS,title:"Мое пространство",permission:E.ALL,icon:A(ae)}]),y=()=>{Fe.confirm({title:"Вы точно хотите выйти?",icon:A(Be),onOk(){t.logout(),n.push("/login")},onCancel(){}})},b=Ee(),{isMobile:k}=ce(b);fe(()=>{o.value=k.value});const P=X(()=>t.user&&t.user.owner);return(c,m)=>{const O=Ue,v=xe,_=Ve,p=We,s=Xe,f=Ye,L=Qe,B=le,G=N,q=tt,Q=ve,J=Je,I=qe;return u(),x(I,{class:"h-full"},{default:i(()=>[a(L,{collapsed:o.value,"onUpdate:collapsed":m[2]||(m[2]=l=>o.value=l),trigger:null,collapsible:"",theme:"light"},{default:i(()=>[g("div",ft,[a(v,{to:"/platform",class:"text-black"},{default:i(()=>[a(O,{title:"Вернуть на главную"},{default:i(()=>[a($(He))]),_:1})]),_:1}),o.value?(u(),x(_,{key:0,size:"medium",icon:A($(Te)),onClick:m[0]||(m[0]=()=>o.value=!o.value)},null,8,["icon"])):(u(),x(_,{key:1,size:"medium",icon:A($(De)),onClick:m[1]||(m[1]=()=>o.value=!o.value)},null,8,["icon"]))]),g("div",gt,[a(f,{mode:"inline",style:{border:"none"}},{default:i(()=>[a(s,{key:"sub1"},{title:i(()=>[g("span",null,[(u(),x(V(d.value.icon))),o.value?ee("",!0):(u(),M("span",vt,D(d.value.title),1))])]),default:i(()=>[(u(!0),M(F,null,te($(h),l=>(u(),M(F,null,[l.isOwner&&$(P)?(u(),x(p,{key:l.id},{default:i(()=>[a(v,{to:l.to},{default:i(()=>[(u(),x(V(l.icon))),g("span",null,D(l.title),1)]),_:2},1032,["to"])]),_:2},1024)):ee("",!0)],64))),256)),(u(!0),M(F,null,te(d.value.subMenu,l=>(u(),M(F,null,[l.isOwner?ee("",!0):(u(),x(p,{key:l.id},{default:i(()=>[a(v,{to:l.to},{default:i(()=>[(u(),x(V(l.icon))),g("span",null,D(l.title),1)]),_:2},1032,["to"])]),_:2},1024))],64))),256))]),_:1}),(u(!0),M(F,null,te(C.value,l=>(u(),x(p,{key:l.id},{default:i(()=>[a(v,{to:l.to},{default:i(()=>[(u(),x(V(l.icon))),g("span",null,D(l.title),1)]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1})])]),_:1},8,["collapsed"]),a(I,null,{default:i(()=>[g("header",_t,[g("div",ht,[a(Q,{open:S.value,"onUpdate:open":m[3]||(m[3]=l=>S.value=l),trigger:"click"},{content:i(()=>[a(f,{style:{border:"none"},selectable:!1},{default:i(()=>[a(p,{key:"1"},{default:i(()=>[a(v,{to:$(R).SETTINGS},{default:i(()=>[a($(W)),bt]),_:1},8,["to"])]),_:1}),a(p,{key:"3"},{default:i(()=>[g("div",{class:"flex",onClick:y},[a(B),St])]),_:1})]),_:1})]),default:i(()=>{var l,z;return[g("div",yt,[(l=$(r))!=null&&l.avatar?(u(),x(G,{key:1,src:c.userAvatar},null,8,["src"])):(u(),x(G,{key:0,style:{"background-color":"#87d068"}},{icon:i(()=>[a($(W))]),_:1})),g("div",null,D((z=$(r))==null?void 0:z.email),1),g("div",Ot,[a(q,{class:je([{"rotate-180 transition-all":!S.value},"transition-all duration-500"])},null,8,["class"])])])]}),_:1},8,["open"])])]),a(J,null,{default:i(()=>[g("div",xt,[Ne(c.$slots,"default")])]),_:3})]),_:3})]),_:3})}}});export{Gt as default};
