import{K as _e,S as ve,q as B,_ as k,r as P,ap as ge,aq as ye,O as he,H as Q,ar as Ce,as as be,T as we,b as d,I as U,at as xe,C as $,z as ke,D as Y,au as Pe,a7 as te,o as S,x as N,w as C,d as q,$ as F,a as M,af as Se,ag as $e,a9 as T,am as oe,s as Te,v as ne,J as ae,an as se,av as Be,aw as Ie,c as le,a1 as Z,F as re,ax as Oe}from"./DutA6s4s.js";import{a as je,_ as ie,F as ce}from"./DQy1XneP.js";import{i as Fe,t as Ne,o as Ae,e as Ee,f as Me,h as ee,B as V}from"./o1aMqsoj.js";import{A as De,M as ze}from"./fAwOVESI.js";import{_ as Re}from"./C2x6kZgX.js";import{u as Ue}from"./CXt5RldZ.js";import{K as qe}from"./D-QVxuq2.js";import{_ as Ke}from"./ClgfcykS.js";import{S as Ve}from"./CArfcuWs.js";import{_ as Je}from"./BsPBNx6V.js";const Le=e=>{const{componentCls:t,iconCls:o,zIndexPopup:n,colorText:u,colorWarning:f,marginXS:r,fontSize:s,fontWeightStrong:m,lineHeight:c}=e;return{[t]:{zIndex:n,[`${t}-inner-content`]:{color:u},[`${t}-message`]:{position:"relative",marginBottom:r,color:u,fontSize:s,display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${t}-message-icon ${o}`]:{color:f,fontSize:s,flex:"none",lineHeight:1,paddingTop:(Math.round(s*c)-s)/2},"&-title":{flex:"auto",marginInlineStart:r},"&-title-only":{fontWeight:m}},[`${t}-description`]:{position:"relative",marginInlineStart:s+r,marginBottom:r,color:u,fontSize:s},[`${t}-buttons`]:{textAlign:"end",button:{marginInlineStart:r}}}}},He=_e("Popconfirm",e=>Le(e),e=>{const{zIndexPopupBase:t}=e;return{zIndexPopup:t+60}});var We=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,n=Object.getOwnPropertySymbols(e);u<n.length;u++)t.indexOf(n[u])<0&&Object.prototype.propertyIsEnumerable.call(e,n[u])&&(o[n[u]]=e[n[u]]);return o};const Ge=()=>k(k({},Me()),{prefixCls:String,content:$(),title:$(),description:$(),okType:ke("primary"),disabled:{type:Boolean,default:!1},okText:$(),cancelText:$(),icon:$(),okButtonProps:Y(),cancelButtonProps:Y(),showCancel:{type:Boolean,default:!0},onConfirm:Function,onCancel:Function}),Xe=B({compatConfig:{MODE:3},name:"APopconfirm",inheritAttrs:!1,props:Fe(Ge(),k(k({},Ne()),{trigger:"click",placement:"top",mouseEnterDelay:.1,mouseLeaveDelay:.1,arrowPointAtCenter:!1,autoAdjustOverflow:!0,okType:"primary",disabled:!1})),slots:Object,setup(e,t){let{slots:o,emit:n,expose:u,attrs:f}=t;const r=P();ge(e.visible===void 0),u({getPopupDomNode:()=>{var i,p;return(p=(i=r.value)===null||i===void 0?void 0:i.getPopupDomNode)===null||p===void 0?void 0:p.call(i)}});const[s,m]=Ue(!1,{value:ye(e,"open")}),c=(i,p)=>{e.open===void 0&&m(i),n("update:open",i),n("openChange",i,p)},a=i=>{c(!1,i)},h=i=>{var p;return(p=e.onConfirm)===null||p===void 0?void 0:p.call(e,i)},_=i=>{var p;c(!1,i),(p=e.onCancel)===null||p===void 0||p.call(e,i)},l=i=>{i.keyCode===qe.ESC&&s&&c(!1,i)},y=i=>{const{disabled:p}=e;p||c(i)},{prefixCls:v,getPrefixCls:b}=he("popconfirm",e),g=Q(()=>b()),x=Q(()=>b("btn")),[w]=He(v),[A]=Ce("Popconfirm",be.Popconfirm),J=()=>{var i,p,I,O,j;const{okButtonProps:E,cancelButtonProps:D,title:z=(i=o.title)===null||i===void 0?void 0:i.call(o),description:R=(p=o.description)===null||p===void 0?void 0:p.call(o),cancelText:de=(I=o.cancel)===null||I===void 0?void 0:I.call(o),okText:pe=(O=o.okText)===null||O===void 0?void 0:O.call(o),okType:L,icon:H=((j=o.icon)===null||j===void 0?void 0:j.call(o))||d(Pe,null,null),showCancel:me=!0}=e,{cancelButton:W,okButton:G}=o,X=k({onClick:_,size:"small"},D),fe=k(k(k({onClick:h},ee(L)),{size:"small"}),E);return d("div",{class:`${v.value}-inner-content`},[d("div",{class:`${v.value}-message`},[H&&d("span",{class:`${v.value}-message-icon`},[H]),d("div",{class:[`${v.value}-message-title`,{[`${v.value}-message-title-only`]:!!R}]},[z])]),R&&d("div",{class:`${v.value}-description`},[R]),d("div",{class:`${v.value}-buttons`},[me?W?W(X):d(V,X,{default:()=>[de||A.value.cancelText]}):null,G?G(fe):d(De,{buttonProps:k(k({size:"small"},ee(L)),E),actionFn:h,close:a,prefixCls:x.value,quitOnNullishReturnValue:!0,emitEvent:!0},{default:()=>[pe||A.value.okText]})])])};return()=>{var i;const{placement:p,overlayClassName:I,trigger:O="click"}=e,j=We(e,["placement","overlayClassName","trigger"]),E=Ae(j,["title","content","cancelText","okText","onUpdate:open","onConfirm","onCancel","prefixCls"]),D=we(v.value,I);return w(d(Re,U(U(U({},E),f),{},{trigger:O,placement:p,onOpenChange:y,open:s.value,overlayClassName:D,transitionName:xe(g.value,"zoom-big",e.transitionName),ref:r,"data-popover-inject":!0}),{default:()=>[Ee(((i=o.default)===null||i===void 0?void 0:i.call(o))||[],{onKeydown:z=>{l(z)}},!1)],content:J}))}}}),Qe=ve(Xe),Ye={class:"py-4"},ue=B({__name:"BaseModal",props:{open:{type:Boolean,default:!1},fullModal:{type:Boolean},modalTitle:{default:""},loading:{type:Boolean,default:!1}},emits:["close","submit"],setup(e,{emit:t}){const o=e,{open:n,fullModal:u,loading:f}=te(o),r=t,s=()=>{r("submit")},m=()=>{r("close")};return(c,a)=>{const h=V,_=ze;return S(),N(_,{open:F(n),"onUpdate:open":a[0]||(a[0]=l=>$e(n)?n.value=l:null),title:c.modalTitle,width:"100%","wrap-class-name":F(u)?"full-modal":"",onCancel:a[1]||(a[1]=l=>m()),onOk:s},{footer:C(()=>[d(h,{key:"back",onClick:m},{default:C(()=>[q("Return")]),_:1}),d(h,{key:"submit",type:"primary",loading:F(f),onClick:s},{default:C(()=>[q("Submit")]),_:1},8,["loading"])]),default:C(()=>[M("div",Ye,[Se(c.$slots,"default")])]),_:3},8,["open","title","wrap-class-name"])}}}),Ze={list:async e=>{const{$http:t}=T();return(await t.get("/api/clusters",e)).data.data},create:async e=>{const{$http:t}=T();return(await t.post("/api/clusters/store",e)).data.data},update:async e=>{const{$http:t}=T();return(await t.post("/api/clusters/update",e)).data.data},delete:async e=>{const{$http:t}=T();return(await t.post(`/api/clusters/delete/${e}`)).data.data},findById:async e=>{const{$http:t}=T();return(await t.get("/api/clusters/show",{params:{password:e.password,user_id:e.user_id,cluster_id:e.cluster_id}})).data.data},search:async e=>{const{$http:t}=T();return(await t.post("/api/clusters/search",e)).data.data}},vt=B({__name:"AuthCluster",props:{type:{},clusterId:{},loading:{type:Boolean}},emits:["submit"],setup(e,{emit:t}){const o=oe(),n=e,u=Te(),{clusterId:f,type:r}=te(n),s=P(!1),m=async()=>{s.value=!0;try{console.log({user_id:u.getUser.id,password:a.password,cluster_id:f.value});const l=await Ze.findById({user_id:u.getUser.id,password:a.password,cluster_id:f.value});h("submit",{data:l,type:r.value})}catch(l){console.log(l)}finally{s.value=!1}},c=P(null),a=ne({password:""}),h=t,_=async()=>{try{(await c.value.validateFields()).errorFields||await m()}catch(l){console.log(l)}};return ae(()=>{var l;o.open||(l=c.value)==null||l.resetFields()}),(l,y)=>{const v=je,b=ie,g=ce;return S(),N(ue,se(F(o),{onSubmit:y[1]||(y[1]=x=>_())}),{default:C(()=>[d(g,{ref_key:"modalAuth",ref:c,layout:"vertical",model:a,name:"basic",autocomplete:"off"},{default:C(()=>[d(b,{name:"password",rules:[{required:!0,message:"Пожалуйста введите пароль от кластера"}]},{default:C(()=>[d(v,{value:a.password,"onUpdate:value":y[0]||(y[0]=x=>a.password=x)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},16)}}});var K={exports:{}};(function(e,t){(function(o,n){n(t,e)})(Be,function(o,n){var u={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};function f(){return"jsonp_"+Date.now()+"_"+Math.ceil(Math.random()*1e5)}function r(c){try{delete window[c]}catch{window[c]=void 0}}function s(c){var a=document.getElementById(c);a&&document.getElementsByTagName("head")[0].removeChild(a)}function m(c){var a=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],h=c,_=a.timeout||u.timeout,l=a.jsonpCallback||u.jsonpCallback,y=void 0;return new Promise(function(v,b){var g=a.jsonpCallbackFunction||f(),x=l+"_"+g;window[g]=function(A){v({ok:!0,json:function(){return Promise.resolve(A)}}),y&&clearTimeout(y),s(x),r(g)},h+=h.indexOf("?")===-1?"?":"&";var w=document.createElement("script");w.setAttribute("src",""+h+l+"="+g),a.charset&&w.setAttribute("charset",a.charset),a.nonce&&w.setAttribute("nonce",a.nonce),a.referrerPolicy&&w.setAttribute("referrerPolicy",a.referrerPolicy),a.crossorigin&&w.setAttribute("crossorigin","true"),w.id=x,document.getElementsByTagName("head")[0].appendChild(w),y=setTimeout(function(){b(new Error("JSONP request to "+c+" timed out")),r(g),s(x),window[g]=function(){r(g)}},_),w.onerror=function(){b(new Error("JSONP request to "+c+" failed")),r(g),s(x),y&&clearTimeout(y)}})}n.exports=m})})(K,K.exports);var et=K.exports;const tt=Ie(et),ot=M("a",null,"Delete",-1),nt=B({__name:"UsersTable",props:{data:{}},setup(e){const t=[{title:"id",dataIndex:"id",width:"10%"},{title:"name",dataIndex:"name"},{title:"email",dataIndex:"email"},{title:"role",dataIndex:"role"},{title:"operation",dataIndex:"operation"}],o=n=>{console.log("delete item from users table: ",n)};return(n,u)=>{const f=Qe,r=Ke;return S(),N(r,{bordered:"","data-source":n.data,columns:t},{bodyCell:C(({column:s,record:m})=>[s.dataIndex==="operation"?(S(),le(re,{key:0},[n.data.length?(S(),N(f,{key:0,title:"Удалить?",onConfirm:c=>o(m.id)},{default:C(()=>[ot]),_:2},1032,["onConfirm"])):Z("",!0)],64)):Z("",!0)]),_:1},8,["data-source"])}}}),at={class:"mt-4"},st=B({__name:"AddingUsersCluster",setup(e){let t,o="";const n=P(!1);function u(_,l){t&&(clearTimeout(t),t=null),o=_;function y(){const v=Oe.stringify({code:"utf-8",q:_});tt(`https://suggest.taobao.com/sug?${v}`).then(b=>b.json()).then(b=>{if(o===_){const g=b.result,x=[];g.forEach(w=>{x.push({value:w[0],label:w[0]})}),l(x)}})}t=setTimeout(y,300)}const f=P([]),r=P(),s=P([]),m=_=>{n.value=!0,u(_,l=>f.value=l),n.value=!1},c=_=>{console.log(_),r.value=_,u(_,l=>f.value=l)},a=()=>{r.value!=""&&s.value.push(r.value)},h=P([{id:1,name:"Edward King",email:"edward32@mail.ru",role:"owner"},{id:2,name:"Edward King 2",email:"edward32@mail.ru",role:"manager"},{id:3,name:"Edward King 3",email:"edward32@mail.ru",role:"manager"}]);return(_,l)=>{const y=Ve,v=V,b=Je;return S(),le(re,null,[d(b,{gap:"middle"},{default:C(()=>[d(y,{value:r.value,"onUpdate:value":l[0]||(l[0]=g=>r.value=g),"show-search":"",placeholder:"input search text","default-active-first-option":!1,"show-arrow":!1,"filter-option":!1,"not-found-content":null,options:f.value,onSearch:m,onChange:c},null,8,["value","options"]),M("div",null,[d(v,{type:"primary",onClick:l[1]||(l[1]=g=>a())},{default:C(()=>[q("Добавить")]),_:1})])]),_:1}),M("div",at,[d(nt,{data:h.value},null,8,["data"])])],64)}}}),gt=B({__name:"UsersModalCluster",emits:["submit"],setup(e,{emit:t}){const o=oe(),n=P(null),u=ne({users:[]}),f=t,r=async()=>{var s;try{(await((s=n.value)==null?void 0:s.validateFields())).errorFields||f("submit")}catch(m){console.log(m)}};return ae(()=>{var s;o.open||(s=n.value)==null||s.resetFields()}),(s,m)=>{const c=ie,a=ce;return S(),N(ue,se(F(o),{onSubmit:m[0]||(m[0]=h=>r())}),{default:C(()=>[d(a,{ref_key:"userModalCluser",ref:n,layout:"vertical",model:u,name:"basic",autocomplete:"off"},{default:C(()=>[d(c,{label:"Пользователи",name:"users"},{default:C(()=>[d(st)]),_:1})]),_:1},8,["model"])]),_:1},16)}}});export{gt as _,vt as a,ue as b,Ze as c};
